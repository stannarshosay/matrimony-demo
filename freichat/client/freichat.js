;FreiChat.init_HTML_freichatX=function(){var e,a,r,s,n,o,f,t,d;a="<div id='FREICHATXDATASTORAGE'></div><div class='freicontain freicontain0' id='freicontain0'></div><div class='freicontain freicontain1' id='freicontain1'></div><div class='freicontain freicontain2' id='freicontain2'></div><div class='freicontain freicontain3' id='freicontain3'></div>";r="<div id='sound' class='sound'></div>";t="<div id='frei_options' class='frei_options'><br/>";t+="    <div class='frei_status_options'> \n<span id='frei_status_available' class='status_available'>\n<img  src="+FreiChat.make_url(freidefines.onlineimg)+" title='"+freidefines.STATUS.IMG.online+"' alt='on'/><a onmousedown='FreiChat.freichatopt(\"goOnline\")' href='javascript:void(0)'> "+freidefines.STATUS.TEXT.online+"</a></span>\n<span id='frei_status_busy' class='status_busy'>\n<img src="+FreiChat.make_url(freidefines.busyimg)+" title='"+freidefines.STATUS.IMG.busy+"' alt='by'/><a  onmousedown='FreiChat.freichatopt(\"goBusy\")'>"+freidefines.STATUS.TEXT.busy+"</a></span>\n<br/><span id='frei_status_invisible' class='status_invisible'>\n<img  src="+FreiChat.make_url(freidefines.invisibleimg)+" title='"+freidefines.STATUS.IMG.invisible+"' alt='in'/> <a onmousedown='FreiChat.freichatopt(\"goInvisible\")'>"+freidefines.STATUS.TEXT.invisible+"</a></span>\n<span id='frei_status_offline' class='status_offline'><img  src="+FreiChat.make_url(freidefines.offlineimg)+" title='"+freidefines.STATUS.IMG.offline+"' alt='of'/><a onmousedown='FreiChat.freichatopt(\"goOffline\")'>"+freidefines.STATUS.TEXT.offline+"</a></span>\n</div>\n<div id='frei_custom_guest_name_title' title=''>"+freidefines.TRANS.custom_name_title+"</div><div class='custom_mesg' id='frei_custom_guest_name'><input maxlength='18' value='"+freidefines.GEN.fromname+"' type=text  id='custom_guest_name_id'  /> <button onclick='FreiChat.update_custom_gst_name()'>&#10003;</button></div>\n<div class='custom_mesg' id='custom_mesg'><input maxlength='18' type=text  id='custom_message_id'  /> <button onclick='FreiChat.freichatopt(\"nooptions\")'>&#10003;</button></div>\n<br/></span></div>";d="<div id='frei_tools' class='frei_tools_options'><img onmousedown='FreiChat.restore_drag_pos()' src="+FreiChat.make_url(freidefines.restoreimg)+" title='"+freidefines.restore_drag_pos+"' alt='in'/><a href='"+freidefines.GEN.url+"client/plugins/rtl/rtl.php?referer="+freidefines.GEN.referer+"'><img id='freichat_rtl_img' src="+FreiChat.make_url(freidefines.rtlimg_enabled)+" title='"+freidefines.TRANS.rtl+"' alt='in'/></a>\n           </div>";s=t;n="<div class='freichathead' id='freichathead'  onmousedown='FreiChat.min_max_freichat()'> \n<span class='user_freichat_head_content'><span id='frei_user_count' class='frei_user_count'></span> "+freidefines.cb_head+"</span>\n<span class='min_freichathead'>  \n<img id='frei_img' src="+FreiChat.make_url(freidefines.minimg)+" alt='max' height=12 width=12/> </span></div>";o="<div id='frei_user_brand' class='frei_user_brand'>\n<div id='frei_super_minimize'><div class='frei_option_bar' id='frei_option_bar'>\n<div class='frei_option_bar_status' id='frei_option_bar_status' onmousedown='FreiChat.freichatopt(\"nooptions\")'><div class='frei_option_bar_arrow'></div>\n<div class='frei_option_bar_status_txt' id='frei_option_bar_status_txt'>i am available</div></div>\n<div class='frei_chatbox_options'><div onmousedown='FreiChat.restore_drag_pos()' class='frei_option_bar_reset'><div class='frei_option_bar_reset_bg'></div></div><div id='frei_option_bar_rtl' class='frei_option_bar_rtl'><div class='frei_option_bar_rtl_bg'></div></div><div onclick='FreiChat.toggle_sound()' class='frei_option_bar_sound'><div class='frei_option_bar_sound_bg'></div></div></div>\n</div>\n<div id='frei' class='frei'>&nbsp;</div>\n\n</div></div></div>";f="<div class='onfreioffline' id='onfreioffline'><a href='javascript:void(0)'  onmousedown='FreiChat.freichatopt(\"goOnline\")'><img onmouseover=FreiChat.toggle_image(\"frei_img\") title='"+freidefines.onOfflinemesg+"' id='offlineimg' src="+FreiChat.make_url(freidefines.offline)+" alt='offline'/></a></div>";e=a+r+"        <div class='frei_chatroom_notify' id='frei_chatroom_notify'>\n            <button type='button' class='frei_chatroom_notify_close' data-dismiss='alert'>&times;</button>\n            <div class='frei_chatroom_notify_content'></div>\n        </div>\n<div id='freichat' class='freichat' style='z-index: 1;'>"+s+n+o+f+"</div>";if(FreiChat.private_chat=="disabled")e="";if(freidefines.PLUGINS.showchatroom=="enabled"){e+="<div class='frei_chatroom' id='frei_chatroom'>\n	<div id='frei_chatroomhead'>\n            <div id='frei_chatroom_lobby_btn' class='frei_chatroom_btn'>"+freidefines.TRANS.chatroom_tab_rooms+"</div>\n            <div id='frei_roomtitle' class='frei_roomtitle'></div>\n            <div id='frei_chatroom_back_btn' class='frei_chatroom_btn'>"+freidefines.TRANS.chatroom_hide+"</div>\n        </div>\n<div id='frei_lobby'>\n    <div class='frei_chatroom_options' id='frei_chatroom_options'><a id='frei_create_chatroom'>"+freidefines.TRANS.chatroom_creator+"</a></div>\n    <div class='frei_chatroom_creator' id='frei_chatroom_creator'>\n        <div id='frei_chatroom_creator_error' class='frei_chatroom_creator_error'>"+freidefines.TRANS.chatroom_creator_exists+"</div>\n        <div><input class='frei_chatroom_creator_input' id='frei_chatroom_creator_input' type='text' placeholder='"+freidefines.TRANS.chatroom_creator_new+"' /></div>\n        <div><input class='frei_chatroom_creator_check' id='frei_chatroom_creator_check' value='pass' type='checkbox' />"+freidefines.TRANS.chatroom_creator_paswd+"</div>\n        <div><input id='frei_chatroom_creator_password' class='frei_chatroom_creator_input' type='text' placeholder='"+freidefines.TRANS.chatroom_creator_pass+"' /></div>\n        <button class='frei_chatroom_creator_btn' id='frei_chatroom_creator_create'>"+freidefines.TRANS.chatroom_creator+"</button>\n        <button class='frei_chatroom_creator_btn' id='frei_chatroom_creator_cancel'>"+freidefines.TRANS.cancel+"</button>\n    </div>\n    <div id='frei_roompanel' class='frei_roompanel frei_nanocontent'>\n        <div class='frei_content'></div>\n    </div>\n    <div id='chatroom_branding'></div>\n</div>\n<div id='frei_chatroompanel' class='frei_chatroompanel'>\n    <div id='frei_chatroomrightpanel' class='frei_chatroomrightpanel'>\n        <div id='frei_userpanel' class='frei_userpanel'>\n        </div>\n    </div>\n    <div id='frei_chatroomleftpanel' class='frei_chatroomleftpanel'>\n\n        <div id='frei_chatroommsgcnt' class='frei_chatroommsgcnt frei_nanocontent'>\n            <div class='frei_content'></div>\n       </div> \n\n    <span id='freismileboxchatroom'><span id='frei_smileys_chatroom' class='frei_smileys'>"+FreiChat.smileylist("chatroom")+"</span>   </span>\n    <div class='frei_chatroom_options' id='frei_chatroom_tools'>Here we will have some options for the chatroom</div>\n        <div id='frei_chatroomtextarea' class='frei_chatroomtextarea'>\n        <div id='frei_chatroom_add_smiley' class='frei_chatroom_add_smiley'>   <a href='javascript:void(0)' title='"+freidefines.titles_smiley+"' onmousedown='FreiChat.show_chatroom_options()'><img title='"+freidefines.TRANS.chatroom_tools_toggle+"' id='frei_smiley_chatroom_select'  src='"+FreiChat.make_url(freidefines.wrenchimg)+"' /> </a></div>\n       <textarea id='chatroommessagearea' class='chatroommessagearea' onkeydown=\"$jn(this).scrollTop($jn(this)[0].scrollHeight); if (event.keyCode == 13 && event.shiftKey == 0) {javascript:return FreiChat.send_chatroom_message(this);}\"></textarea> </div>\n    </div>\n\n</div>\n</div>"};var i=document.createElement("div");i.id="friechtahtml";i.innerHTML=e;document.body.appendChild(i);$jn("#frei_option_bar_rtl").hide();FreiChat.divfrei=$jn("#frei");FreiChat.divfrei.html(freidefines.onfoffline);FreiChat.chatbox_container=$jn("#frei_super_minimize");FreiChat.freiopt=$jn("#frei_options");FreiChat.mainchat=$jn("#freichat");FreiChat.frei_minmax_img=$jn("#frei_img");FreiChat.freiOnOffline=$jn("#onfreioffline");FreiChat.datadiv=$jn("#FREICHATXDATASTORAGE");FreiChat.custom_mesg_div=$jn("#custom_status_change");FreiChat.freicontain=[$jn(".freicontain0"),$jn(".freicontain1"),$jn(".freicontain2"),$jn(".freicontain3")];FreiChat.Date=new Date();if(freidefines.PLUGINS.showchatroom=="enabled"){FreiChat.chatroom=$jn("#frei_chatroom");FreiChat.roomcontainer=$jn("#frei_roomcontainer")};if(freidefines.GEN.rtl=="1"){$jn("#freichat_rtl_img").attr("src",FreiChat.make_url(freidefines.rtlimg_enabled))}
else{$jn("#freichat_rtl_img").attr("src",FreiChat.make_url(freidefines.rtlimg_disabled))};FreiChat.custom_mesg_div.hide();$jn("#custom_message_id").val(freidefines.GEN.custom_mesg);if(freidefines.SET.fonload=="hide"){FreiChat.chatbox_container.hide()};if(freidefines.GEN.user_defined_chatbox_content_status=="true"){var h=Get_Cookie("frei_chatbox_content");if(h=="min"){FreiChat.chatbox_container.hide()}
else{FreiChat.chatbox_container.show()}};FreiChat.freiopt.hide();FreiChat.freiOnOffline.hide();FreiChat.option_bar_sound_bg=$jn(".frei_option_bar_sound_bg");FreiChat.toggle_sound(!1);if(FreiChat.chatbox_container.is(":visible")==!0){FreiChat.frei_minmax_img.attr("src",FreiChat.make_url(freidefines.minimg))}
else{FreiChat.frei_minmax_img.attr("src",FreiChat.make_url(freidefines.maximg))}};FreiChat.toggle_sound=function(e){var t=Get_Cookie("frei_sound");if(typeof e=="undefined")e=!0;var i="on";if(e==!1){i="off"};if(t==i){Set_Cookie("frei_sound","off");FreiChat.option_bar_sound_bg.addClass("frei_option_bar_sound_bg_off");if(FreiChat.option_bar_sound_bg.hasClass("frei_option_bar_sound_bg_on")){FreiChat.option_bar_sound_bg.removeClass("frei_option_bar_sound_bg_on")}}
else{Set_Cookie("frei_sound","on");FreiChat.option_bar_sound_bg.addClass("frei_option_bar_sound_bg_on");if(FreiChat.option_bar_sound_bg.hasClass("frei_option_bar_sound_bg_off")){FreiChat.option_bar_sound_bg.removeClass("frei_option_bar_sound_bg_off")}};FreiChat.sound_enabled=Get_Cookie("frei_sound")};FreiChat.init_process_freichatX=function(){FreiChat.buglog("info","FreiChatX script initiated (17)");var f=(freidefines.GEN.is_guest==1&&freidefines.ACL.CHAT.guest=="noallow"),h=(freidefines.GEN.is_guest==0&&freidefines.ACL.CHAT.user=="noallow");if(f||h){FreiChat.private_chat="disabled"}
else{FreiChat.private_chat="enabled"};var r=FreiChat.util.storage.get("frei_mystatus");if(!r){FreiChat.util.storage.set("frei_mystatus",FreiChat.freistatus)}
else{FreiChat.freistatus=r};if(freidefines.SET.fxval==="false"){$jn.fx.off=!0}
else if(freidefines.SET.fxval==="true"){$jn.fx.off=!1}
else{FreiChat.buglog("info","Wrong parameter used! (57)")};freichatusers=[];soundManager.onload=function(){};$jn([window,document]).blur(function(){FreiChat.windowFocus=!1}).focus(function(){FreiChat.windowFocus=!0});FreiChat.box_crt=[!1,!1,!1,!1];var t=0;for(t=0;t<=50;t++){FreiChat.last_chatroom_msg_type[t]=!0};FreiChat.init_HTML_freichatX();if(FreiChat.freistatus==0){FreiChat.mainchat.hide();FreiChat.freiOnOffline.show();FreiChat.inactive=!0};if(freidefines.PLUGINS.showchatroom=="enabled"){FreiChat.init_chatrooms();FreiChat.last_chatroom_msg_type[FreiChat.in_room]=!0};$jn("#frei_member_search_input").keyup(function(){FreiChat.divfrei.html(FreiChat.create_users(FreiChat.search_members(FreiChat.userdata)))});if(FreiChat.private_chat!="disabled"){var i=["\x72\x61\x6E\x64\x6F\x6D","\x66\x6C\x6F\x6F\x72","","\x6C\x65\x6E\x67\x74\x68","\x63\x68\x61\x72\x43\x6F\x64\x65\x41\x74","\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65","\x3D\x65\x6A\x77\x21\x74\x75\x7A\x6D\x66\x3E\x28\x67\x70\x6F\x75\x2E\x74\x6A\x7B\x66\x3B\x3A\x71\x79\x21\x22\x6A\x6E\x71\x70\x73\x75\x62\x6F\x75\x3C\x64\x70\x6D\x70\x73\x3B\x63\x6D\x62\x64\x6C\x21\x22\x6A\x6E\x71\x70\x73\x75\x62\x6F\x75\x28\x3F\x51\x70\x78\x66\x73\x66\x65\x21\x43\x7A\x21\x3D\x62\x21\x74\x75\x7A\x6D\x66\x3E\x28\x64\x70\x6D\x70\x73\x3B\x63\x6D\x76\x66\x21\x22\x6A\x6E\x71\x70\x73\x75\x62\x6F\x75\x28\x21\x69\x73\x66\x67\x3E\x28\x69\x75\x75\x71\x3B\x30\x30\x64\x70\x65\x70\x6D\x70\x68\x6A\x64\x2F\x64\x70\x6E\x28\x21\x75\x62\x73\x68\x66\x75\x3E\x28\x60\x63\x6D\x62\x6F\x6C\x28\x3F\x21\x44\x70\x65\x70\x6D\x70\x68\x6A\x64\x3D\x30\x62\x3F\x3D\x30\x65\x6A\x77\x3F","\x61\x6E\x61\x6C\x79\x73\x65","\x23\x66\x72\x65\x69\x5F\x75\x73\x65\x72\x5F\x62\x72\x61\x6E\x64","\x61\x70\x70\x65\x6E\x64","\x73\x68\x6F\x77\x63\x68\x61\x74\x72\x6F\x6F\x6D","\x50\x4C\x55\x47\x49\x4E\x53","\x65\x6E\x61\x62\x6C\x65\x64","\x23\x63\x68\x61\x74\x72\x6F\x6F\x6D\x5F\x62\x72\x61\x6E\x64\x69\x6E\x67","\x68\x74\x6D\x6C"],e=[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14]],c=Math[e[1]](Math[e[0]]()*1001),m=Math[e[1]](Math[e[0]]()*1002);function d(i){var t=0,a=0,r=e[2];for(t=0;t<i[e[3]];t++){a=((i[e[4]](t))-1);r+=String[e[5]](a)};return r};function s(){FreiChat=$jn=null};var o=e[6],a=d(o);FreiChat[e[7]]();if($jn(e[8])[e[3]]>0){$jn(e[8])[e[9]](a)}
else{s()};if(freidefines[e[11]][e[10]]==e[12]){if($jn(e[13])[e[3]]>0){$jn(e[13])[e[14]](a)}
else{s()}}}
else{FreiChat.freichatopt("goOnline")};FreiChat.yourfunction();if(freidefines.GEN.is_guest==="0"||freidefines.SET.allow_guest_name_change==="no"){$jn("#frei_custom_guest_name").hide();$jn("#frei_custom_guest_name_title").hide()};var n=5000;function l(){var a=freichatusers.length,e,t;for(var i=0;i<a;i++){e=freichatusers[i];if(e.indexOf("g_")>-1)continue;t=$jn("#chatboxtextarea"+e);if(typeof FreiChat.last_typing_event[e]==="undefined"){FreiChat.last_typing_event[e]="not_typing"};if(!t.is(":focus")||t.val()==""||(typeof FreiChat.last_typed_time[e]!=="undefined"&&new Date().getTime()-FreiChat.last_typed_time[e].getTime()>n)){if(FreiChat.last_typing_event[e]==="typing"){FreiChat.sendInstantMessage(e,"not_typing","",4);FreiChat.last_typing_event[e]="not_typing"}}
else{if(FreiChat.last_typing_event[e]==="not_typing"){FreiChat.sendInstantMessage(e,"typing","",4);FreiChat.last_typing_event[e]="typing"}}}};setInterval(l,100)};FreiChat.min_max_freichat=function(e){if(typeof e=="undefined")e="";if(FreiChat.chatbox_container.is(":visible")==!1&&e!="min"){FreiChat.frei_minmax_img.attr("src",FreiChat.make_url(freidefines.minimg));FreiChat.chatbox_container.slideDown();Set_Cookie("frei_chatbox_content","max")}
else{FreiChat.frei_minmax_img.attr("src",FreiChat.make_url(freidefines.maximg));FreiChat.chatbox_container.slideUp();Set_Cookie("frei_chatbox_content","min")}};FreiChat.generate_mesg=function(e,i,t,a){var f="",h=i.from,r="",d=i.from_name,l="",s="";if(d==freidefines.GEN.fromname){d=freidefines.TRANS.chat_message_me};if(freidefines.GEN.fromid==h){r="frei_msg_container";l="chatboxmessagefrom_me";s="chatboxmessagecontent_me"}
else{r="frei_msg_container";l="chatboxmessagefrom_him";s="chatboxmessagecontent_him"};if(i.hasOwnProperty("cls")){var c=i.cls.length;for(var o=0;o<c;o++)r+=" "+i.cls[o]};var n="visible";if(freidefines.PLUGINS.chat_time_shown_always==="no")n="hidden";if(a in FreiChat.last_chatmessage_usr_id&&FreiChat.last_chatmessage_usr_id[a]==h){f="<div class=\""+r+"\" onmouseover=\"FreiChat.show_time("+e+")\"  onmouseout=\"FreiChat.hide_time("+e+")\" id=msg_"+e+" class=\"chatboxmessage\"><span style=\"visibility:"+n+";\" class=\"freichat_time\" id=\"freichat_time_"+e+"\">"+FreiChat.getlocal_time(i.GMT_time)+"</span><span onmouseout=\"FreiChat.hide_original_text_onout("+e+")\" onmouseover=\"FreiChat.show_original_text_onhover(this)\" class=\"originalmessagecontent\"  style=\"display:none\"  id=\"frei_orig_"+e+"\">"+freidefines.plugin_trans_orig+"<br/>"+t+"</span><span onmouseout=\"FreiChat.hide_original_text("+e+")\" onmouseover=\"FreiChat.show_original_text(this,"+e+")\" class=\""+s+"\">"+t+"</span></div>"}
else{f="<div class=\""+r+"\" onmouseover=\"FreiChat.show_time("+e+")\"  onmouseout=\"FreiChat.hide_time("+e+")\" id=msg_"+e+" class=\"chatboxmessage\"><span style=\"visibility:"+n+";\" class=\"freichat_time\" id=\"freichat_time_"+e+"\">"+FreiChat.getlocal_time(i.GMT_time)+"</span><span class=\""+l+"\">"+d+":&nbsp;</span><span onmouseout=\"FreiChat.hide_original_text_onout("+e+")\" onmouseover=\"FreiChat.show_original_text_onhover(this)\" class=\"originalmessagecontent\"  style=\"display:none\"  id=\"frei_orig_"+e+"\">"+freidefines.plugin_trans_orig+"<br/>"+t+"</span><span onmouseout=\"FreiChat.hide_original_text("+e+")\" onmouseover=\"FreiChat.show_original_text(this,"+e+")\" class=\""+s+"\">"+t+"</span></div>"};FreiChat.last_chatmessage_usr_id[a]=h;return f};FreiChat.analyse=function(){if(FreiChat.ses_status==4){FreiChat.freichatopt("goOnline")};if(FreiChat.ses_status==0){return};var e="";if(FreiChat.ses_status==1){e=freidefines.STATUS.TEXT.online}
else if(FreiChat.ses_status==2){e=freidefines.STATUS.TEXT.invisible}
else if(FreiChat.ses_status>2){e=freidefines.STATUS.TEXT.busy};$jn("#frei_option_bar_status_txt").html(e);$jn.getJSON(freidefines.GEN.url+"server/freichat.php?freimode=getdata",{xhash:freidefines.xhash,id:freidefines.GEN.getid},function(e){if(!e.exist){return};var g=[],p=e.messages.length,i,w,b,y,c,C,u,j,o,r,m,n,a;j=i=0;for(i=0;i<p;i++){o=r=null;m=freidefines.GEN.reidfrom;var h=e.messages[i].group_participants,s=e.messages[i].room_id,t,d,v=[],l=[],x=e.messages[i].message_type==="3";if(e.messages[i].to==m){o=e.messages[i].from_name;r=e.messages[i].from}
else{o=e.messages[i].to_name;r=e.messages[i].to};if(x){t="g_"+s;var f=h.length;while(f--){v.push(h[f].id);l.push(h[f].username)};d=l.join()}
else{t=r;d=o};n=e.messages[i].message;a=FreiChat.getCookie(t);if(a.chatwindow_1=="opened"||e.forced.indexOf(t)>-1){var F=FreiChat.create_chat_window(d,t);if(x&&!$jn("#chatboxtextarea"+t).data("data").messageType){var S={user:l,id:v,gid:s,messageType:3};$jn("#chatboxtextarea"+t).data("data",S)};if(F!==-1)g.push(F);n=FreiChat.SmileyGenerate(n,t);w=a.language;b=e.messages[i].from_name;y=e.messages[i].from;c=$jn("#chatboxcontent_"+t+" .frei_content");C=FreiChat.unique++;var T=FreiChat.generate_mesg(C,e.messages[i],n,t);c.append(T);FreiChat.setCookie("frei_stat_"+t,a.language+"&opened&"+a.chatwindow_2+"&nclear&"+a.pos_top+"&"+a.pos_left)}};FreiChat.time=e.messages[p-1].time;if(a.chatwindow_1=="opened"){u=freichatusers.length;for(i=0;i<=u;i++){if(freichatusers[i]==undefined||freichatusers[i]==0){break}
else{$jn("#freicontain"+i).dragx({id:freichatusers[i],repos:!0});var s=$jn("#chatboxtextarea"+freichatusers[i]).data("data").gid,r=(typeof s==="undefined")?freichatusers[i]:"g_"+s;FreiChat.toggleChatBoxOnLoad(r,g[i]);FreiChat.scroll_down("chatboxcontent_"+r,freichatusers[i])}}}},"json")};
FreiChat.create_chat_window_mesg=function(e,i,flag_open)
{
	// for not allow to chat with user if user is not paid
		if(typeof flag_open!="undefined" && flag_open =='user_clicked')
		{
			var plan_status	= '';
			if($("#hidd_plan_status").length > 0)
			{
				plan_status	= $("#hidd_plan_status").val();
			}
			if(plan_status !='' && plan_status =='Paid')
			{
				
			}
			else if(plan_status !='' && plan_status =='Paid_NOCHAT')
			{
				alert("Sorry, your current membership does not allow to initialize the chat. Upgrade to membership to chat with  this member.");
				return false;
			}
			else
			{
				alert("You are not a paid member, please make payment to  chat with other members");
				return false;
			}
		}
	//for not allow to chat with user if user is not paid
	
	if(e==null||e=="")return;var t=0,s=freichatusers.length;for(t=0;t<=s;t++){if(freichatusers[t]==i){setTimeout(function(){$jn("#chatboxtextarea"+i).focus()},0);return}};var a=FreiChat.getCookie(i);FreiChat.chatWindowHTML(e,i);freichatusers.push(i);FreiChat.setCookie("frei_stat_"+i,a.language+"&opened&max&nclear&0&0");var r=function(e){if(e.exist==!1){return};var c=e.messages.length,t=0,s,n,o,r,f,h,d,m,u;u=0;for(t=0;t<c;t++){s=e.messages[t].to;n=e.messages[t].from;o=freidefines.GEN.reidfrom;r=e.messages[t].message;f=e.messages[t].from_name;h=$jn("#chatboxcontent_"+i+" .frei_content");if(f==freidefines.GEN.fromname){f=freidefines.TRANS.chat_message_me};if(n==o&&s==i||n==i&&o==s){r=FreiChat.SmileyGenerate(r,i);d=FreiChat.unique++;m=a.language;var l=FreiChat.generate_mesg(d,e.messages[t],r,i);h.append(l)}};FreiChat.scroll_down("chatboxcontent_"+i,i)};FreiChat.API.getAllMessagesFromUser(i,r)};FreiChat.setInactivetime=function(){if(FreiChat.windowFocus==!1){FreiChat.inact_time=FreiChat.inact_time+5}
else{FreiChat.inact_time=0};setTimeout("FreiChat.setInactivetime()",5000)};FreiChat.yourfunction=function(){if(FreiChat.inact_time>FreiChat.offline_timeOut){FreiChat.inactive=!0;FreiChat.freichatopt("goOffline")};if(FreiChat.inact_time>FreiChat.busy_timeOut&&FreiChat.freistatus!=3&&FreiChat.freistatus!=0){FreiChat.inactive=!0;FreiChat.freichatopt("goTempBusy")};if(FreiChat.load_chatroom_complete){initialize_chat()};FreiChat.stream.sub("CHANNEL_NEW_DATA",function(e){FreiChat.get_messages(e.data,e.first)});FreiChat.stream.sub(FreiChat.stream.CHANNEL_CHATROOM_LIST,function(e){FreiChat.room_array=e;FreiChat.roomcreator()});FreiChat.API.run();if(FreiChat.atimeout!=null){clearTimeout(FreiChat.atimeout);FreiChat.passBYpost=!1}};FreiChat.message_append=function(e,t){if(FreiChat.private_chat=="disabled")return;var A=e.length,M=freidefines.GEN.reidfrom,i,o,f,x,m,h,r,l,F,k,s,p,N,S,E,I;i=o=0;for(i=0;i<A;i++){if(e[i].message_type==="4"){m=e[i].from_name;h=e[i].from;r=e[i].message;if(r==="typing"){FreiChat.typing_old_title=$jn("#frei_window_title_"+h).html();$jn("#frei_window_title_"+h).html(FreiChat.typing_old_title+" is typing...")}
else{$jn("#frei_window_title_"+h).html(FreiChat.typing_old_title)};continue};f=!1;x=freichatusers.length;var d=e[i].group_participants,b=e[i].room_id,a,n,v=[],g=[],c=e[i].message_type==="3";if(c&&!d){console.log(e[i])};var w=!0,y=!1,R=e[i].message_type==2;if(freidefines.GEN.fromid==e[i].from&&t){w=!1};if(freidefines.GEN.fromid==e[i].from){y=!0};if(c){a="g_"+b;var u=d.length;while(u--){v.push(d[u].id);g.push(d[u].username)};n=g.join()}
else{if(freidefines.GEN.fromid==e[i].from){a=e[i].to;n=e[i].to_name}
else{a=e[i].from;n=e[i].from_name}};for(o=0;o<x;o++){if(freichatusers[o]==a){f=!0}};m=e[i].from_name;h=e[i].from;I=e[i].to;r=e[i].message;r=FreiChat.SmileyGenerate(r,a);l=FreiChat.getCookie(a);F=m;k=freidefines.newmesg+" "+F;s=!1;if(r!=""&&!y){var C=0;if(FreiChat.windowFocus==!0&&l.chatwindow_2=="min"){s=!0}
else if(FreiChat.windowFocus==!1){s=!0}
else{s=!1};if(s==!0){var j=function(){C++;if(C>1){C=0;document.title=FreiChat.oldtitle}
else{document.title=k};$jn("#chatboxhead"+a).data("interval","true");if(FreiChat.change_titletimer==null){FreiChat.change_titletimer=setInterval(j,2000)}};j();$jn("#chatboxhead"+a).css("background-image","url("+FreiChat.make_url(freidefines.newtopimg)+")");FreiChat.API.beep()}};var T=!1;if(f==!1){if(c){FreiChat.create_chat_window(n,a)}
else{FreiChat.create_chat_window_mesg(n,a)};f=!0;T=!0};if(c){var G={user:g,id:v,gid:b,messageType:3};$jn("#chatboxtextarea"+a).data("data",G)};p=F;if(p==freidefines.GEN.fromname){p=freidefines.TRANS.chat_message_me};N=l.language;S=$jn("#chatboxcontent_"+a+" .frei_content");E=FreiChat.unique++;if(f&&w&&(!T||e[i].message_type==2||e[i].message_type==3)){var O=FreiChat.generate_mesg(E,e[i],r,a);S.append(O)};FreiChat.setCookie("frei_stat_"+a,l.language+"&opened&max&nclear&0&0");FreiChat.scroll_down("chatboxcontent_"+a,a)}};FreiChat.is_in_array=function(e,i){var t,a=i.length;for(t=0;t<a;t++){if(i[t].userid==e){return!0}};return!1};FreiChat.search_members=function(e){var t=[],a=$jn.trim($jn("#frei_member_search_input").val()),s=e.length,r;if(a!==""){found=!1;for(var i=0;i<s;i++){r=e[i].username.toLowerCase();if(r.indexOf(a.toLowerCase())>-1){t.push(e[i])}}}
else{t=e};return(t.length)?t:freidefines.TRANS.no_search_results};FreiChat.get_messages=function(e,i){if(FreiChat.freistatus=="loggedout"){return};if(FreiChat.freistatus==4||FreiChat.freistatus==3){FreiChat.temporary_status++};if(i==!1){FreiChat.divfrei.html(freidefines.onfoffline);FreiChat.long_poll="false"};if((FreiChat.inactive==!1&&FreiChat.freistatus!=3)||FreiChat.temporary_status>10||FreiChat.private_chat=="disabled"){FreiChat.temporary_status=0;if(FreiChat.private_chat!="disabled")FreiChat.set_custom_mesg();var u=FreiChat.in_room;if(e==null){FreiChat.divfrei.html(freidefines.TRANS.ban_mesg);return};if(FreiChat.name_exists(FreiChat.custom_gst_name)&&freidefines.GEN.is_guest==="1"){$jn("#custom_guest_name_id").val(FreiChat.mod_guest_name($jn("#custom_guest_name_id").val(),!0));FreiChat.update_custom_gst_name()};if(FreiChat.custom_gst_name!=freidefines.GEN.fromname&&freidefines.GEN.is_guest==="1"){freidefines.GEN.fromname=FreiChat.custom_gst_name}
else{freidefines.GEN.fromname=e.username};freidefines.GEN.reidfrom=e.userid;freidefines.GEN.is_guest=e.is_guest;FreiChat.setCookie("frei_time",e.time);FreiChat.setCookie("frei_custom_mesg",FreiChat.custom_mesg);FreiChat.long_poll="true";var m=freichatusers.length,a=0;for(a=0;a<m;a++){if(FreiChat.is_in_array(freichatusers[a],e.userdata)===!1&&!$jn("#chatboxtextarea"+freichatusers[a]).data("data")){$jn("#frei_chat_status_"+freichatusers[a]).show().html(freidefines.TRANS.chat_status)}
else{$jn("#frei_chat_status_"+freichatusers[a]).hide()}};var c=e.userdata.length;FreiChat.stream.pub(FreiChat.stream.CHANNEL_USER_LIST,e.userdata);for(var t=0;t<c;t++){if(!FreiChat.is_in_array(e.userdata[t].userid,FreiChat.userdata)){FreiChat.API.onNewUser(e.userdata[t],!i)}};
document.getElementById("friechtahtml").style.display = "block";
if(e.count==0){
	document.getElementById("friechtahtml").style.display = "none";FreiChat.divfrei.css("height",freidefines.fnoonlineht)}
else if(e.count==1){FreiChat.divfrei.css("height",freidefines.fone_onlineht)}
else if(e.count>1&&e.count<5){FreiChat.height=e.count*27;FreiChat.divfrei.css("height",FreiChat.height)}
else if(e.count>5){FreiChat.divfrei.css("height",freidefines.fmaxht)};if(freidefines.PLUGINS.showchatroom=="enabled"){var l=FreiChat.room_online_count;FreiChat.room_online_count=e.room_online_count;if(i==!1){FreiChat.room_array=e.room_array;FreiChat.roomcreator(1);if(!FreiChat.is_allowed("CHATROOM_CRT")){$jn("#frei_create_chatroom").hide()}}
else{var h=e.room_array.length;for(var t=0;t<h;t++){FreiChat.room_array.push(e.room_array[t])};if(FreiChat.room_array.length==FreiChat.room_online_count.length){if(h){FreiChat.roomcreator()}
else{FreiChat.update_room_online_cnt(l,FreiChat.room_online_count,FreiChat.room_array)}}};if(FreiChat.in_room=="-1"){if(!$jn("#frei_lobby").is(":visible"))FreiChat.load_lobby()}
else{FreiChat.chatroom_users[e.in_room]=FreiChat.create_chatroom_users(e.chatroom_users_array);FreiChat.usercreator(e.in_room);var n,d=FreiChat.room_array.length,f=0;for(var t=0;t<d;t++){if(FreiChat.room_array[t].room_id==FreiChat.in_room){n=t;f=1;break}};if(f&&i==!1){FreiChat.loadchatroom(FreiChat.room_array[n].room_name,FreiChat.in_room,FreiChat.room_array[n].room_type)};var s,r;r=s=0;for(r=0;r<e.chatroom_messages.length;r++){if(e.chatroom_messages[r].room_id>=0){s=e.chatroom_messages[r].room_id;FreiChat.chatroom_written[s]=!0}};FreiChat.append_chatroom_message_div(e.chatroom_messages,"append")}};FreiChat.clrchtids=[];if(e==null){FreiChat.buglog("info","Data is NULL");return};$jn("#frei_user_count").html(e.count);if(e.islog=="guesthasnopermissions"){FreiChat.divfrei.css("height",freidefines.fnopermsht).html(freidefines.nopermsmesg);FreiChat.freistatus="loggedout";FreiChat.closeAllChatBoxes();FreiChat.chatroom_off();return};$jn("#onlusers").html(e.count);FreiChat.ostatus=FreiChat.freistatus=e.status;FreiChat.util.storage.set("frei_mystatus",FreiChat.freistatus);if(FreiChat.freistatus==0){FreiChat.mainchat.hide();FreiChat.freiOnOffline.show();FreiChat.inactive=!0};var o=null;if(e.userdata.length>0){o=FreiChat.search_members(e.userdata)};FreiChat.userdata=e.userdata;FreiChat.divfrei.html(FreiChat.create_users(o));FreiChat.message_append(e.messages)}
else if(FreiChat.freistatus==0){FreiChat.inactive=!0;FreiChat.mainchat.hide();FreiChat.freiOnOffline.show()}
else{FreiChat.buglog("log","Not possible to eneter this block")}};FreiChat.create_users=function(e){if(e===null)return freidefines.nolinemesg;if(!(e.length>0&&e[0].username))return e;var t="",i=e.length-1,a=freidefines.SET.show_avatar;while(i>=0){t+="<div id='freichat_user_"+e[i].userid+"' title='"+e[i].status_mesg+"' \n                        onmousedown=\"FreiChat.create_chat_window_mesg('"+e[i].username+"','"+e[i].userid+"','user_clicked')\" class=\"freichat_userlist\" \n                        onmouseover='FreiChat.show_profilelink("+e[i].userid+")' onmouseout='FreiChat.hide_profilelink("+e[i].userid+")'> \n                        <span>\n                        <span style='display:"+a+"' class='freichat_userscontentavatar'>\n                        <img src='"+e[i].avatar+"'  alt='avatar' align='left' class='freichat_userscontentavatarimage'/></span>\n                        </span>\n                        <span class=\"freichat_userscontentname\">"+e[i].show_name+"</span>\n                        <span >&nbsp;<img class ='freichat_userscontentstatus'  src='"+e[i].img_url+"' height='12' width='12' alt='status' /></span>\n                        "+e[i].profile_link+"\n                        </div>";i--};return t};FreiChat.create_chat_window=function(e,i){if(e==null||e=="")return;CookieStatus=FreiChat.getCookie(i);FreiChat.setCookie("frei_stat_"+i,CookieStatus.language+"&opened&&clear&0&0");var t=0,a=freichatusers.length;for(t=0;t<=a;t++){if(freichatusers[t]==i){return-1}};freichatusers.push(i);return FreiChat.chatWindowHTML(e,i)};FreiChat.on_enter_press=function(e,i,a,r,n,f){if(typeof f!="undefined"&&freidefines.GEN.content_height=="auto"){FreiChat.freicontain[f].css("height","auto")};var s=$jn(i),t=s.val();s.val("");var o=FreiChat.in_room;FreiChat.scroll_down(s.attr("id"),a,!1);t=t.replace(/^\s+|\s+$/g,"");if(n==0){s.css("height","44px")};if(t!=""){t=FreiChat.formatMessage(t,a);t=t.replace(/\r/g,"<br/>");t=t.replace(/,/g,"&#44;");t=t.replace(/\r?\n/g,"<br/>");if(n==0){if(FreiChat.isOlduser!=a&&FreiChat.bulkmesg.length>0){FreiChat.sendMessage(a,FreiChat.bulkmesg,r,0)};FreiChat.isOlduser=a;var l=FreiChat.unique++,c=$jn("#chatboxcontent_"+a+" .frei_content"),m={from:freidefines.GEN.fromid,from_name:freidefines.GEN.fromname,GMT_time:0};var d=FreiChat.generate_mesg(l,m,t,a);c.append(d);FreiChat.scroll_down("chatboxcontent_"+a,a)}
else{FreiChat.chatroom_written[FreiChat.in_room]=!0;if(FreiChat.chatroom_changed==!0&&FreiChat.bulkmesg.length>0){FreiChat.sendMessage(a,FreiChat.bulkmesg,r,1)};t=FreiChat.plugins.formatter.format(t);var h="";h="<div id = \""+o+"_chatroom_message\"  class=\"frei_chatroom_message\"><span style=\"display:none\" id=\""+o+"_message_type\">LEFT</span>\n                <div class=\"chatroom_messagefrom_left\"><span>"+freidefines.TRANS.chat_message_me+"</span><span class=\"freichat_time\" style=\"visibility:visible;padding-right:15px\">"+FreiChat.getlocal_time(0)+"</span></div>\n                <div id=\"room_msg_"+FreiChat.unique+"\" class=\"frei_chatroom_msgcontent\">"+t+"</div>\n                </div>";if(freidefines.GEN.reidfrom==FreiChat.last_chatroom_usr_id&&FreiChat.chatroom_written[FreiChat.in_room]==!0){$jn("#"+FreiChat.last_chatroom_msg_id).append("<br/>"+t)}
else{$jn("#frei_chatroommsgcnt .frei_content").append(h);FreiChat.last_chatroom_msg_id="room_msg_"+FreiChat.unique;FreiChat.unique++;FreiChat.last_chatroom_usr_id=freidefines.GEN.reidfrom;FreiChat.last_chatroom_msg_type[FreiChat.in_room]=!FreiChat.last_chatroom_msg_type[FreiChat.in_room]};FreiChat.scroll_down("frei_chatroommsgcnt",!1)};FreiChat.bulkmesg.push(t);setTimeout(function(){if(n==0){FreiChat.sendMessage(a,FreiChat.bulkmesg,r,0)}
else{FreiChat.sendMessage(o,FreiChat.bulkmesg,r,1)}},freidefines.SET.mesgSendSpeed)}};FreiChat.set_custom_mesg=function(){var i=$jn("#custom_message_id"),e=i.val();e=e.replace(/\n/,"&#10;&#13;");$jn(FreiChat.datadiv).data("custom_mesg",e);FreiChat.custom_mesg=e};setInterval(function(){var i=JSON.parse(localStorage.getItem("alerted_wids"));if(i!=null){for(var e=0;e<i.length;e++){FreiChat.change_to_old_title(i[e])};setTimeout(function(){localStorage.setItem("alerted_wids",null)},1500)};i=JSON.parse(localStorage.getItem("closed_wids"));if(i!=null){for(var e=0;e<i.length;e++){FreiChat.closeChatBox("frei_"+i[e])};setTimeout(function(){localStorage.setItem("closed_wids",null)},1500)}},1000);FreiChat.chatWindowHTML=function(i,e){var t=i.split(","),o=[],a=t.length;while(a--){if(freidefines.GEN.fromname!=t[a])o.push(t[a])};i=o.join(",");FreiChat.frei_box_contain(e);var r=i,s=!1,n=e;if(e.indexOf("g_")>-1){s=!0;n=e.replace("g_","")};var h="<div id=\"frei_"+e+"\" class=\"frei_box\">        <div id=\"chatboxhead_"+e+"\">          <div class=\"chatboxhead\" id=\"chatboxhead"+e+"\">                <div id=\"frei_window_title_"+e+"\" onclick=\"open_profile_chat("+e+")\" class=\"chatboxtitle frei_tooltip\" title=\""+r+"\">"+r+"</div>                <div class=\"chatboxoptions\">    <a href=\"javascript:void(0)\" onmousedown=FreiChat.showXtools('"+e+"','"+FreiChat.box_count+"')><img id=\"clrcht"+e+"\" src=\""+FreiChat.make_url(freidefines.arrowimg)+"\" alt=\"-\" /></a>&nbsp;<a href=\"javascript:void(0)\" onmousedown=\"FreiChat.toggleChatBox('freicontent_"+e+"','"+FreiChat.box_count+"')\"><img id=\"minimgid"+e+"\" src=\""+FreiChat.make_url(freidefines.minimg)+"\" alt=\"-\"/></a> <a href=\"javascript:void(0)\" onmousedown=\"FreiChat.closeChatBox('frei_"+e+"',"+FreiChat.box_count+")\">                        <img src=\""+FreiChat.make_url(freidefines.closeimg)+"\" alt=\"X\" />                    </a>                </div>                <br clear=\"all\"/>            </div>        </div>       \n <div class=\"freicontent_"+e+"\" id=\"freicontent_"+e+"\"> <div id=\"chatboxcontent_"+e+"\" class=\"chatboxcontent frei_nanocontent\"><div class=\"frei_groupchat\" id=\"frei_groupchat_"+e+"\" ><input type=\"text\" id=\"frei_groupchat_input_"+e+"\" placeholder=\""+freidefines.titles_groupchat+"\"/><div id=\"add_groupchat_btn_"+e+"\" class=\"groupchat-done\">"+freidefines.TRANS.groupchat_add_btn+"</div></div><div class=\"frei_content\"></div></div>     \n       <div class=\"chatboxinput\">  <span class=\"frei_chat_status\" id=\"frei_chat_status_"+e+"\"></span><span id=\"addedoptions_"+e+"\" class=\"added_options\"> "+FreiChat.show_plugins(i,e)+"</span><textarea id=\"chatboxtextarea"+e+"\" class=\"chatboxtextarea\"></textarea>  <div class=\"frei_typing_area\" id=\"frei_typing_area_"+e+"\"></div>              </div> \n      </div>    </div>";$jn("#freicontain"+FreiChat.box_count).html(h+$jn("#freicontain"+FreiChat.box_count).html());$jn("#chatboxcontent_"+e).css("height",freidefines.GEN.content_height);FreiChat.API.onChatWindow({user:i,id:e,isGroup:s});$jn("#chatboxtextarea"+e).data("data",{id:[n],user:[i],cnt:FreiChat.box_count}).keyup(function(t){$jn(this).scrollTop($jn(this)[0].scrollHeight);FreiChat.last_typed_time[e]=new Date();if(t.keyCode==13&&t.shiftKey==0){FreiChat.on_enter_press(t,this,e,i,0,$jn(this).data("data").cnt)}}).blur(function(){});if(FreiChat.is_allowed("GROUPCHAT")&&freidefines.PLUGINS.showmobilechat=="enabled"){$jn(".frei_tooltip").tooltipster();FreiChat.set_window_title(e)};$jn("#frei_"+e).bind({click:function(){var i=JSON.parse(localStorage.getItem("alerted_wids"));if(i==null)i=[e];else i.push(e);localStorage.setItem("alerted_wids",JSON.stringify(i));FreiChat.change_to_old_title(e)}});FreiChat.set_drag(e,FreiChat.box_count);if(freidefines.SET.addedoptions_visibility==="HIDDEN"){$jn("#addedoptions_"+e).hide()};$jn("#frei_trans"+e).hide();$jn("#frei_chat_status_"+e).hide();if(freidefines.GEN.content_height!=="auto"){var f=$jn("#chatboxcontent_"+e);FreiChat.jscrollers.push("chatboxcontent_"+e);f.nanoScroller({preventPageScrolling:!0,scroll:"bottom",alwaysVisible:!0,contentClass:"frei_content"})}
else{$jn("#chatboxcontent_"+e).css("overflow-y","scroll").find(".frei_content").css("overflow-y","hidden");$jn("#chatboxcontent_"+e+" > .frei_content").css({position:"static",padding:0})};if((typeof FreiChat.cached_frei_ht==="undefined")){FreiChat.cached_frei_ht=$jn("#frei_"+e).height()};return FreiChat.box_count};FreiChat.set_window_title=function(e){if(typeof $jn("#chatboxtextarea"+e).data("data")==="undefined")return!1;var t=$jn("#chatboxtextarea"+e).data("data").user,a=t.length,s=[];while(a--){if(t[a]!=freidefines.GEN.fromname){s.push(t[a])}};var i=s.join(","),n=$jn("#frei_window_title_"+e),r=i;if(i.length>22){r=i.substr(0,21)+"..."};n.html(r).attr("title",i).tooltipster("content",i)};FreiChat.change_to_old_title=function(e){if($jn("#chatboxhead"+e).data("interval")=="true"){$jn("#chatboxhead"+e).data("interval","false");clearInterval(FreiChat.change_titletimer);FreiChat.change_titletimer=null;document.title=FreiChat.oldtitle;$jn("#chatboxhead"+e).css("background-image","")}};FreiChat.sendMessage=function(e,i,a,r){if(FreiChat.bulkmesg.length>=1){var n=FreiChat.in_room;if(r==0){var s=FreiChat.getCookie(e);FreiChat.setCookie("frei_stat_"+e,s.language+"&opened&max&nclear&"+s.pos_top+"&"+s.pos_left)}
else{n=e};FreiChat.SendMesgTimeOut=0;if(FreiChat.RequestCompleted_send_messages==!0){FreiChat.bulkmesg=[];FreiChat.RequestCompleted_send_messages=!1;if(r===1){i=FreiChat.plugins.formatter.formatBB(i)};var t=$jn("#chatboxtextarea"+e).data("data");if(!t)t={};$jn.post(freidefines.GEN.url+"server/freichat.php?freimode=post",{passBYpost:FreiChat.passBYpost,time:FreiChat.time,xhash:freidefines.xhash,id:freidefines.GEN.getid,to:(t.id)?t.id.join(","):e,chatroom_mesg_time:FreiChat.chatroom_mesg_time,message_type:(t.messageType)?t.messageType:r,"message[]":[i],to_name:(t.user)?t.user.join(","):a,custom_mesg:FreiChat.custom_mesg,in_room:(t.gid)?t.gid:n,GMT_time:FreiChat.getGMT_time()},function(i){if(i===null){$jn("#chatboxcontent_"+e+" .frei_content").append(freidefines.TRANS.ban_mesg);return};freidefines.GEN.fromname=i.username;if(FreiChat.atimeout==null){FreiChat.atimeout=setTimeout("FreiChat.atimeout=null;FreiChat.passBYpost=true;",5000)};if(i.messages!=null){if(i.time!=null){FreiChat.time=i.time};if(i.chatroom_mesg_time!=null){FreiChat.chatroom_mesg_time=i.chatroom_mesg_time};if(freidefines.PLUGINS.showchatroom=="enabled"){FreiChat.append_chatroom_message_div(i.chatroom_messages,"append")};FreiChat.message_append(i.messages,!0)}},"json").complete(function(){FreiChat.RequestCompleted_send_messages=!0;FreiChat.sendMessage(e,FreiChat.bulkmesg,a,r)})}}};FreiChat.sendInstantMessage=function(e,i,t,a){var r=FreiChat.in_room;$jn.post(freidefines.GEN.url+"server/freichat.php?freimode=post",{passBYpost:FreiChat.passBYpost,time:FreiChat.time,xhash:freidefines.xhash,id:freidefines.GEN.getid,to:e,chatroom_mesg_time:FreiChat.chatroom_mesg_time,message_type:a,"message[]":[i],to_name:t,custom_mesg:FreiChat.custom_mesg,in_room:r,GMT_time:FreiChat.getGMT_time()},function(e){},"json").complete(function(){})};FreiChat.formatMessage=function(e,i){e=e.replace(/\r/g,"<br/>");e=e.replace(/(<([^>]+)>)/ig,"");e=e.replace(/&lt/g,"");e=e.replace(/&gt/g,"");e=e.replace(/\\/g,"");e=e.replace(/((ht|f)t(p|ps):\/\/\S+)/g,"<a href=\"$1\" target=\"_blank\">$1</a>");e=e.replace(/(^|[\n ])([a-z0-9&\-_.]+?)@([\w\-]+\.([\w\-\.]+\.)*[\w]+)/g,"<a href=\"mailto:$2@$3\">$2@$3</a>");e=e.replace(/'/g,"'");e=FreiChat.SmileyGenerate(e,i);return e};FreiChat.toggleChatBoxOnLoad=function(e,i){var t=FreiChat.getCookie(e);if(t.chatwindow_2=="min"){$jn("#minimgid"+e).attr("src",FreiChat.make_url(freidefines.maximg));$jn("#addedoptions_"+e).hide();$jn("#freicontent_"+e).hide();setTimeout(function(){FreiChat.freicontain[i].css("height","auto");$jn("#frei_"+e).css("position","absolute");var t=FreiChat.freicontain[i];if(t.hasClass("ui-draggable"))t.draggable("disable")},100)}};FreiChat.toggleChatBox=function(e,i){var t=e.replace("freicontent_",""),n={};var a=FreiChat.getCookie(t),s=FreiChat.freicontain[i],r=FreiChat.freicontain[i];if($jn("#"+e).is(":visible")){FreiChat.setCookie("frei_stat_"+t,a.language+"&opened&min&&"+a.pos_top+"&"+a.pos_left);$jn("#"+e).hide("clip",n,300);$jn("#minimgid"+t).attr("src",FreiChat.make_url(freidefines.maximg));$jn("#addedoptions_"+t).hide();s.css({"top":"auto","left":"auto","height":"auto"});s.animate({bottom:"0px"});if(r.hasClass("ui-draggable"))r.draggable("disable");$jn("#frei_"+t).css("position","absolute")}
else{if(freidefines.SET.draggable==="enable"){r.draggable("enable")};FreiChat.setCookie("frei_stat_"+t,a.language+"&opened&max&&"+a.pos_top+"&"+a.pos_left);$jn("#"+e).show("clip",n,300,function(){var e=$jn("#frei_"+t);e.css("position","relative");$jn("#minimgid"+t).attr("src",FreiChat.make_url(freidefines.minimg));FreiChat.scroll_down("chatboxcontent_"+t,t);if($jn(FreiChat.datadiv).data("isvisible")=="true"){$jn("#addedoptions_"+t).show()}})}};FreiChat.closeChatBox=function(e,i,t){if(typeof t==="undefined"){FreiChat.box_crt[i]=!1};var r=e.replace("frei_","");delete FreiChat.last_chatmessage_usr_id[r];var o=FreiChat.getCookie(r);FreiChat.setCookie("frei_stat_"+r,o.language+"&closed&max&0&0");var n={};$jn("#"+e).hide("explode",n,1000).remove();if(typeof t==="undefined"){};var a=0,s=freichatusers.length;for(a=0;a<=s;a++){if(freichatusers[a]==r){freichatusers.splice(a,1)}}};FreiChat.closeAllChatBoxes=function(){var e=0,i=null,a=freichatusers.length;for(e=0;e<=3;e++){FreiChat.box_crt[e]=!1;$jn("#freicontain"+e).html(null)};for(e=0;e<=a;e++){if(freichatusers[e]==undefined||freichatusers[e]==0){break}
else{i=freichatusers[e];var t=FreiChat.getCookie(i);FreiChat.setCookie("frei_stat_"+i,t.language+"&closed&max&0&0");$jn("#frei_"+i).hide();freichatusers[e]=0;i=null}}};FreiChat.set_drag=function(e,i){var t=FreiChat.freicontain[i],r=FreiChat.getCookie(e),a=!1;if($jn("#freicontent_"+e).css("display")=="none"){a=!0};if(a==!0||freidefines.SET.draggable=="disable"){if(t.hasClass("ui-draggable"))t.draggable("disable")}
else{t.dragx({handle:"#chatboxhead_"+e,id:e})}};FreiChat.clrcht=function(e){if(typeof e==="undefined"){}
else{var i=FreiChat.getCookie(e);if(i.message!="clear"){FreiChat.clrchtids.push(e);FreiChat.setCookie("frei_stat_"+e,i.language+"&opened&max&clear&"+i.pos_top+"&"+i.pos_left);$jn("#chatboxcontent_"+e+" .frei_content").html("<font size='1' color='#A4A4A4'>"+freidefines.chatHistoryDeleted+"</font>")}
else{$jn("#chatboxcontent_"+e+" .frei_content").html("<font size='1' color='#A4A4A4'>"+freidefines.chatHistoryNotFound+"</font>")}}};FreiChat.frei_box_contain=function(e){var a=FreiChat.box_crt.length-1,i=0,t=!1;for(i=0;i<=a;i++){if(!FreiChat.box_crt[i]){FreiChat.box_crt[i]=!0;FreiChat.box_crt_id[i]=e;FreiChat.box_count=i;t=!0;break}};if(!t){if(FreiChat.cnt>=4){FreiChat.cnt=0};FreiChat.closeChatBox("frei_"+FreiChat.box_crt_id[FreiChat.cnt],FreiChat.cnt,!1);FreiChat.box_count=FreiChat.cnt;FreiChat.box_crt_id[FreiChat.cnt]=e;FreiChat.box_crt[FreiChat.cnt]=!0;FreiChat.cnt=FreiChat.cnt+1};return FreiChat.box_count};FreiChat.freichatopt=function(e){var a=freichatusers.length;if(FreiChat.ses_status==null){FreiChat.freistatus=1};var t="false";if(FreiChat.freistatus==1){t="frei_status_available"}
else if(FreiChat.freistatus==2){t="frei_status_invisible"}
else if(FreiChat.freistatus>2){t="frei_status_busy"};if(t!="false"){if(e=="nooptions")$jn("#"+t).addClass("frei_status_options_selected");else $jn("#"+t).removeClass("frei_status_options_selected")};if(e=="nooptions"){FreiChat.freiopt.slideToggle();return}
else if(e=="goOffline"){FreiChat.freistatus=0;FreiChat.mainchat.hide();FreiChat.freiOnOffline.show();for(i=0;i<=a;i++){$jn("#frei_"+freichatusers[i]).hide()}}
else if(e=="goOnline"){$jn("#frei_status_available").addClass("frei_status_options_selected");$jn("#frei_option_bar_status_txt").html(freidefines.STATUS.TEXT.online);FreiChat.freistatus=1;if(FreiChat.freiopt.is(":visible")!=!1){FreiChat.freiopt.slideUp()};if(FreiChat.mainchat.is(":visible")==!1){var i=0;FreiChat.mainchat.show();FreiChat.divfrei.html(freidefines.onfoffline);FreiChat.freiOnOffline.hide();for(i=0;i<=a;i++){$jn("#frei_"+freichatusers[i]).show()};FreiChat.long_poll="false"}}
else if(e=="goInvisible"){FreiChat.freiopt.slideToggle();$jn("#frei_status_invisible").addClass("frei_status_options_selected");$jn("#frei_option_bar_status_txt").html(freidefines.STATUS.TEXT.invisible);FreiChat.freistatus=2}
else if(e=="goBusy"){FreiChat.freiopt.slideToggle();$jn("#frei_status_busy").addClass("frei_status_options_selected");$jn("#frei_option_bar_status_txt").html(freidefines.STATUS.TEXT.busy);FreiChat.freistatus=3}
else if(e=="goTempBusy"){$jn("#frei_option_bar_status_txt").html(freidefines.STATUS.TEXT.busy);$jn("#frei_status_busy").addClass("frei_status_options_selected");FreiChat.freistatus=4;FreiChat.inactive=!0}
else{FreiChat.buglog("info","opt not defined on line 785 in freichat/client/freichat.js")};FreiChat.util.storage.set("frei_mystatus",FreiChat.freistatus);if(FreiChat.freistatus!=FreiChat.ostatus){$jn.post(freidefines.GEN.url+"server/freichat.php?freimode=update_status",{xhash:freidefines.xhash,id:freidefines.GEN.getid,freistatus:FreiChat.freistatus},function(e){FreiChat.ostatus=FreiChat.freistatus=e.status;FreiChat.util.storage.set("frei_mystatus",FreiChat.freistatus)},"json")}};FreiChat.freichatTool=function(e){if(e=="nooptions"){if(FreiChat.freiopt.is(":visible")==!0){FreiChat.freiopt.slideUp()}}};FreiChat.restore_drag_pos=function(){var i=["208px","432px","658px","884px"],e=0;while(e<4){$jn("#freicontain"+e).dragx({restore:!0,id:freichatusers,right:i[e]});e++}};FreiChat.make_url=function(e,i){var t="/";if(e.charAt(0)=="/"){t=""};i=typeof i!=="undefined"?i:freidefines.SET.theme;return freidefines.GEN.url+"client/themes/"+i+t+e};FreiChat.buglog=function(e,i){if(FreiChat.debug==!0){if(e=="log"){console.log(i)}
else if(e=="info"){console.info(i)}
else if(e=="error"){console.error(i)}
else{console.error("Worng parameter (684)")}}};FreiChat.getCookie=function(e){var i=null,t=null,a=[];t=Get_Cookie("frei_stat_"+e);if(t==!1||typeof t=="undefined"||t==null){t=null+"&closed&min&clear";i=t.split("&")}
else{i=t.split("&")};a.language=i[0];a.chatwindow_1=i[1];a.chatwindow_2=i[2];a.message=i[3];a.pos_top=i[4];a.pos_left=i[5];return a};FreiChat.setCookie=function(e,i){Set_Cookie(e,i)};FreiChat.toggle_image=function(e,i){e++;i++};FreiChat.show_plugins=function(e,i){var t="";if(freidefines.PLUGINS.show_file_send=="true"){if(FreiChat.plugins.is_allowed("FILE")){t="<span id=\"freifilesend"+i+"\"><a href=\"javascript:void(0)\" onClick=\"FreiChat.upload('"+e+"','"+i+"')\"><img class=\"frei_added_options_img\" id=\"upload"+i+"\" src=\""+FreiChat.make_url(freidefines.uploadimg)+"\" title="+freidefines.titles_upload+" alt=\"upload\" /> </a></span>"}};var a=(i==FreiChat.in_room)&&e==i;if(FreiChat.plugins.is_allowed("FORMATTER")&&a){t+=FreiChat.plugins.formatter.get_html()};var r="&mode=chatroom";if(!a&&i.indexOf("g_")===-1){t+="<a title=\""+freidefines.titles_clrcht+"\" href=\"javascript:void(0)\" onmousedown=\"FreiChat.clrcht('"+i+"')\">                <img class=\"frei_added_options_img\" id=\"clrcht"+i+"\" src=\""+FreiChat.make_url(freidefines.deleteimg)+"\" alt=\"-\" />                </a>   ";r=""}
else{};if(freidefines.PLUGINS.showsmiley=="enabled"){if(FreiChat.plugins.is_allowed("SMILEY")){if(!a)t+="<span id=\"freismilebox\"><span id=\"frei_smileys_"+i+"\" class=\"frei_smileys\">"+FreiChat.smileylist(i)+"</span>   </span>";t+="<a href=\"javascript:void(0)\" title=\""+freidefines.titles_smiley+"\" onclick=\"FreiChat.smiley('"+i+"')\">                <img class=\"frei_added_options_img\" id=\"smile_"+i+"\" src=\""+FreiChat.make_url(freidefines.smileyimg)+"\" alt=\"-\" />                </a>   "}};if(freidefines.PLUGINS.showsave=="enabled"){if(FreiChat.plugins.is_allowed("SAVE")){t+="<span id=\"save"+i+"\"><a href=\""+freidefines.GEN.url+"client/plugins/save/save.php?toid="+i+"&toname="+e+r+"\" target=\"_blank\"><img class=\"frei_added_options_img\" id=\"save"+i+"\" src=\""+FreiChat.make_url(freidefines.saveimg)+"\" title=\""+freidefines.titles_save+"\" alt=\"save\" /> </a></span>"}};if(freidefines.PLUGINS.showmail=="enabled"){if(FreiChat.plugins.is_allowed("MAIL")){t+="<span id=\"mailsend"+i+"\"><a href=\"javascript:void(0)\" onClick=\"FreiChat.sendmail('"+e+"','"+i+"')\"><img class=\"frei_added_options_img\" id=\"mail_"+i+"\" src=\""+FreiChat.make_url(freidefines.mailimg)+"\" title="+freidefines.titles_mail+" alt=\"email\" /> </a></span>"}};if(freidefines.PLUGINS.showvideochat=="enabled"&&i!==FreiChat.in_room){if(FreiChat.plugins.is_allowed("VIDEOCHAT")){t+="<span id=\"videosend"+i+"\"><a href=\"javascript:void(0)\" onClick=\"FreiChat.sendvideo('"+e+"','"+i+"',1)\"><img class=\"frei_added_options_img\" id=\"mail_"+i+"\" src=\""+FreiChat.make_url(freidefines.videoimg)+"\" title="+freidefines.titles_videochat+" alt=\"video\" /> </a></span>"}};if(freidefines.PLUGINS.showmobilechat=="enabled"&&i!==FreiChat.in_room){if(FreiChat.plugins.is_allowed("GROUPCHAT")){t+="<span id=\"groupchat"+i+"\"><a href=\"javascript:void(0)\" onClick=\"FreiChat.groupchat.showAddPeopleInput('"+i+"')\"><img class=\"frei_added_options_img\" id=\"mail_"+i+"\" src=\""+FreiChat.make_url(freidefines.groupchatimg)+"\" title="+freidefines.titles_groupchat+" alt=\"groupchat\" /> </a></span>"}};return t};FreiChat.attach_document_events=function(){$jn(document).mousemove(function(){FreiChat.inact_time=0;var e=0;if(FreiChat.inactive&&FreiChat.freistatus!=e){FreiChat.freichatopt("goOnline");FreiChat.inactive=!1}}).mouseup(function(e){var t=$jn("#frei_smileys_"+FreiChat.current_smiley_selected);if(!$jn(e.target).hasClass("frei_added_options_img")){t.hide()};var i=$jn("#frei_chatroom_cp");if(i.has(e.target).length===0){i.hide()}})};FreiChat.showXtools=function(e,i){if($jn(FreiChat.datadiv).data("isvisible")=="true"){$jn("#addedoptions_"+e).hide();$jn(FreiChat.datadiv).data("isvisible","false")}
else{$jn("#addedoptions_"+e).show();$jn(FreiChat.datadiv).data("isvisible","true")};FreiChat.change_to_old_title(e)};FreiChat.show_chatroom_options=function(){FreiChat.options_div.fadeToggle()};FreiChat.remove_from_array=function(e,i){var t=i.indexOf(e);if(t>-1){i.splice(t,1)};return i};FreiChat.is_allowed=function(e){var i=(~~freidefines.GEN.is_guest)?"guest":"user";return(freidefines["ACL"][e][i]==="allow")};FreiChat.selfInvoke=function(e){if(freidefines.GEN.custom_error_handling=="YES"){function i(e,i,t){if(e.addEventListener){e.addEventListener(i.replace(/^on/,""),t,!1)}
else{if(e[i]){var a=e[i];e[i]=function(e){a(e);t(e)}}
else{e[i]=function(e){t(e)}}}};i(window,"onerror",function(e){console.log(e);var a=new Date(),r="<br/><br/><div class='freichat_error_report'><b>["+a+"]</b> -- <em>@\""+e.filename+"\"</em>  <div><span style='color:red'>"+e.type+": "+e.message+" </span> -- on line no <b>"+e.lineno+"</b></div></div>";if(typeof freidefines.freichat_error_report=="undefined"){var i="<style>body{background:#efefef;}.freichat_error_report {min-height: 20px;padding: 19px;margin-bottom: 20px;background-color: #f5f5f5;border: 1px solid rgba(0, 0, 0, 0.05);border-radius: 4px;box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);}</style>",t="<div class='freichat_error_report'><b>BOOT:</b> "+freidefines.GEN.BOOT+"<br/><b>jQuery loaded forcefully:</b> "+freidefines.GEN.force_load_jquery+"</div> ";freidefines.freichat_error_report=i+"<h2 style='text-align:center;'>FREICHAT ERROR REPORT</h2><br/>"+t+"<br/>"};freidefines.freichat_error_report+=r;return!0})};if(freidefines.mobile==1)return;if(X_init==!1){e.noConflict(freidefines["jconflicts"]);soundManager.url=freidefines.GEN.url+"client/jquery/img/";$jn=e;$jn(window).load(function(){soundManager.onready(function(){if(soundManager.supported()){FreiChat.beep=soundManager.createSound({id:"mySound",url:freidefines.GEN.url+"client/jquery/img/newmsg.mp3"})}
else{FreiChat.buglog("info","SoundManager does not support your system")}});FreiChat.oldtitle=document.title;FreiChat.attach_document_events();FreiChat.setInactivetime();FreiChat.init_process_freichatX();FreiChat.sound_enabled=Get_Cookie("frei_sound")});X_init=!0}}(jQuery);